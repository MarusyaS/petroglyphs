<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ВШЭ-Граф.Проект "Петроглифы Пегтымеля"</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/fontawesome.min.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="https://unpkg.com/force-graph"></script>
    <script src="https://unpkg.com/react-force-graph-2d"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-light">
        <div id="container">
            <!--HOME-->
          <a class="navbar-brand" href="homepage.html">На главную</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          </button>
          <div class="dropdown">
            <button class="dropbtn">Группировать</button>
          </div>
          <div class="dropdown">
            <button class="dropbtn">Скачать</button>
            <div class="dropdown-content">
              <a href="data/deers.csv">Deer.csv</a>
              <a href="data/Heads.csv">Heads.csv</a>
              <a href="data/Legs.csv">Legs.csv</a>
            </div>
          </div> 
        </div>
    </nav> 
    <div class="container-xxl">
        <h1>Граф</h1>
        <p>
          Граф представляет из себя сгруппированные по набору различных признаков фигуры оленей.
          Данные, использованные в визуализации можно скачать в формате CSV.
        </p>
<!--Граф-->
        <div class = "graph" id="graph"></div>
          <script>
            
              
                let legs_json = {
          "nodes": [
              {
                  "id": "1-1-1",
                  "surface_number": "1-1",
                  "png": "gan_images/1-1-1.png",
                  "multi_figured_composition": 1.0,
                  "other_creatures": 0.0
              },
              {
                  "id": "1-2-1",
                  "surface_number": "1-2",
                  "png": "gan_images/1-2-1.png",
                  "multi_figured_composition": 1.0,
                  "other_creatures": 1.0
              },
              {
                  "id": "1-3-1",
                  "surface_number": "1-3",
                  "png": "gan_images/1-3-1.png",
                  "multi_figured_composition": 1.0,
                  "other_creatures": 1.0
              },
              {
                  "id": "1-3-2",
                  "surface_number": "1-3",
                  "png": "gan_images/1-3-2.png",
                  "multi_figured_composition": 1.0,
                  "other_creatures": 1.0
              },
            ],
              "links": [
                  {
                      "source": "1-1-1",
                      "target": "1-2-1",
                      "weight": 5.0
                  },
                  {
                      "source": "1-1-1",
                      "target": "1-3-1",
                      "weight": 4.0
                  },
                  {
                      "source": "1-1-1",
                      "target": "1-3-2",
                      "weight": 3.0
                  }]}
        
              const Graph = ForceGraph()
              (document.getElementById('graph'))
                .graphData(legs_json)
                .nodeId('id')
                // .nodeVal('val')
                .nodeLabel('id')
                .nodeAutoColorBy('surface_number')
                .linkSource('source')
                .linkTarget('target')
                .linkWidth('weight')
                .linkColor('color')
                .nodeRelSize(8)
                // .onNodeClick()
                .nodeCanvasObject((node, ctx, globalScale) => {
                  const size = 12;
                  const img = new Image();
                  img.src = node.png;
                  ctx.drawImage(img, node.x - size / 2, node.y - size / 2, size, size);
              }
            )
        
        
        
          </script>
    </div>
<!--FOOTER-->
    <footer class="site-footer">
        <div class="container-fluid">
          <p class="copy">© Магистры НИУ ВШЭ, 2022</p>
          <p>Петроглифы Пегтымеля</p>
        </div>
      </footer>
</body>
</html>